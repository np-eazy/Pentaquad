{"ast":null,"code":"import Direction from \"./gameUtils/Direction\";\nimport Piece from \"./gameUtils/Piece\";\n\n// TODO: Pull up this function into a utils/functions file\nfunction randint(a, b) {\n  return Math.floor(Math.random() * (b - a)) + a;\n}\nconst Gravity = {\n  RIGHT: 0,\n  UP: 1,\n  LEFT: 2,\n  DOWN: 3\n};\nconst PIECE_SIZE = 5;\nconst SPAWN_OFFSET = 2;\nconst GameState = class {\n  constructor(_ref) {\n    let {\n      boardSize\n    } = _ref;\n    this.timer = 0;\n    this.board = this.boardSize = boardSize;\n    this.pidSize = (this.boardSize + SPAWN_OFFSET * 2) * 2;\n    this.gravity = new Direction(Gravity.DOWN);\n    this.placeBlock = true;\n    this.currPiece = null;\n  }\n  update() {\n    console.log(this.gravity);\n    if (this.placeBlock) {\n      this.placeBlock = false;\n      var [x, y] = [0, 0];\n\n      // Place the current piece\n      if (this.currPiece != null) {\n        for (const cell in this.currPiece.cells) {\n          [x, y] = [cell[0] + this.currPiece.cx, cell[1] + this.currPiece.cy];\n          if (x >= 0 && x < this.boardSize && y >= 0 && y < this.boardSize) {\n            this.board[y][x] = this.currPiece.type;\n          }\n        }\n      }\n\n      // Set the position and gravity with which to create a new piece\n      this.gravity.turnLeft();\n      var r = randint(-SPAWN_OFFSET, this.boardSize + SPAWN_OFFSET);\n      if (this.gravity.angle == Gravity.RIGHT) {\n        [x, y] = [-SPAWN_OFFSET, r];\n      } else if (this.gravity.angle == Gravity.UP) {\n        [x, y] = [r, -SPAWN_OFFSET];\n      } else if (this.gravity.angle == Gravity.LEFT) {\n        [x, y] = [SPAWN_OFFSET + this.board_size, r];\n      } else if (this.gravity.angle == Gravity.DOWN) {\n        [x, y] = [r, SPAWN_OFFSET + this.board_size];\n      }\n      this.currPiece = new Piece({\n        center_x: x,\n        center_y: y,\n        angle: this.gravity.angle,\n        pieceSize: PIECE_SIZE,\n        boardXSize: this.boardSize,\n        boardYSize: this.boardSize,\n        pidSize: this.pidSize\n      });\n    } else {\n      if (this.currPiece) {\n        this.currPiece.idleMove();\n        if (this.currPiece.checkCollision(this.currPiece.angle)) {\n          this.placeBlock = true;\n        }\n      }\n    }\n  }\n\n  // TODO: Call this.currPiece.activeMove and check for the collision in both idle and active directions\n  executeAction(action) {\n    console.log(action);\n    return this;\n  }\n};\nexport default GameState;","map":{"version":3,"names":["Direction","Piece","randint","a","b","Math","floor","random","Gravity","RIGHT","UP","LEFT","DOWN","PIECE_SIZE","SPAWN_OFFSET","GameState","constructor","_ref","boardSize","timer","board","pidSize","gravity","placeBlock","currPiece","update","console","log","x","y","cell","cells","cx","cy","type","turnLeft","r","angle","board_size","center_x","center_y","pieceSize","boardXSize","boardYSize","idleMove","checkCollision","executeAction","action"],"sources":["/Users/joeyzhu/code/visuals/pentaquad/src/components/game/GameState.js"],"sourcesContent":["import Direction from \"./gameUtils/Direction\";\nimport Piece from \"./gameUtils/Piece\";\n\n// TODO: Pull up this function into a utils/functions file\nfunction randint(a, b) {\n    return Math.floor(Math.random() * (b - a)) + a;\n}\n\nconst Gravity = {\n    RIGHT: 0,\n    UP: 1,\n    LEFT: 2,\n    DOWN: 3,\n}\n\nconst PIECE_SIZE = 5;\nconst SPAWN_OFFSET = 2;\n\nconst GameState = class {\n    constructor ({boardSize}) {\n        this.timer = 0;\n        this.board = \n        this.boardSize = boardSize;\n        this.pidSize = (this.boardSize + SPAWN_OFFSET * 2) * 2;\n        this.gravity = new Direction(Gravity.DOWN);\n        this.placeBlock = true;\n        this.currPiece = null;\n    }\n\n    update() {\n        console.log(this.gravity)\n        if (this.placeBlock) {\n            this.placeBlock = false;\n            var [x, y] = [0, 0]\n\n            // Place the current piece\n            if (this.currPiece != null) {\n                for (const cell in this.currPiece.cells) {\n                    [x, y] = [cell[0] + this.currPiece.cx, cell[1] + this.currPiece.cy]\n                    if (x >= 0 && x < this.boardSize && y >= 0 && y < this.boardSize) {\n                        this.board[y][x] = this.currPiece.type\n                    }\n                }\n            }\n\n\n            // Set the position and gravity with which to create a new piece\n            this.gravity.turnLeft();\n            var r = randint(-SPAWN_OFFSET, this.boardSize + SPAWN_OFFSET)\n            if (this.gravity.angle == Gravity.RIGHT) {\n                [x, y] = [-SPAWN_OFFSET, r]\n            } else if (this.gravity.angle == Gravity.UP) {\n                [x, y] = [r, -SPAWN_OFFSET]\n            } else if (this.gravity.angle == Gravity.LEFT) {\n                [x, y] = [SPAWN_OFFSET + this.board_size, r]\n            } else if (this.gravity.angle == Gravity.DOWN) {\n                [x, y] = [r, SPAWN_OFFSET + this.board_size]\n            }\n\n            this.currPiece = new Piece({\n                center_x: x,\n                center_y: y,\n                angle: this.gravity.angle,\n                pieceSize: PIECE_SIZE,\n                boardXSize: this.boardSize,\n                boardYSize: this.boardSize,\n                pidSize: this.pidSize,\n            })\n        } else {\n            if (this.currPiece) {\n                this.currPiece.idleMove()\n                if (this.currPiece.checkCollision(this.currPiece.angle)) {\n                    this.placeBlock = true\n                }\n            }\n        }\n    }\n\n    // TODO: Call this.currPiece.activeMove and check for the collision in both idle and active directions\n    executeAction(action) {\n        console.log(action);\n        return this;\n    }\n}\n\nexport default GameState;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}